INTERNSHIPS_API_PROJECT ?= internships-api-project
INTERNSHIPS_API_IMAGE_VERSION ?= 0.0.1
INTERNSHIPS_API_IMAGE_NAME ?= internships-api
INTERNSHIPS_DB_NAME ?= internshipsbackenddb
INTERNSHIPS_DB_USERNAME ?= internshipsbackenddb
INTERNSHIPS_DB_PASSWORD ?= internshipsbackenddbpwd
INTERNSHIPS_DB_PORT ?= 5432
INTERNSHIPS_DB_HOST ?= internships-db
INTERNSHIPS_NETWORK ?= "internships-network"
INTERNSHIPS_API_ACCOUNT_INIT_EMAIL ?= ekaterina.kulikova22@rambler.com
INTERNSHIPS_SMTP_USERNAME ?= "your_smtp_username"
INTERNSHIPS_MESSAGE_BROKER_USERNAME ?= internshipsbackendmessagebroker
INTERNSHIPS_MESSAGE_BROKER_PASSWORD ?= internshipsbackendmessagebrokerpwd
INTERNSHIPS_MESSAGE_BROKER_HOST ?= message-broker
INTERNSHIPS_MESSAGE_BROKER_PORT ?= 5672
INTERNSHIPS_FRONTEND_URL ?= "your_frontend_url"
INTERNSHIPS_API_JWT_SECRET ?= 22z17633gyn6uhyfj4ty43mny65grg88jcsc7j386ngps7n6
INTERNSHIPS_API_JWT_ALGORITHM ?= HS512
INTERNSHIPS_API_JWT_ACCESS_TOKEN_EXPIRE_MINUTES ?= 525600
INTERNSHIPS_POINTS_URL ?= http://points-api:8008
INTERNSHIPS_API_URL ?= http://internships-api:8008
INTERNSHIPS_API_CONSUMER_KEY ?= 873497b1-ynbu-8dvs-8876-879th56e7869
INTERNSHIPS_TIMESHEET_URL ?= http://timesheet-api:8008

.PHONY: run
run:
	APP_API_IMAGE_VERSION=$(INTERNSHIPS_API_IMAGE_VERSION) \
    APP_API_IMAGE_NAME=$(INTERNSHIPS_API_IMAGE_NAME) \
    APP_PROXY_NETWORK=$(INTERNSHIPS_NETWORK) \
    APP_DB_USERNAME=$(INTERNSHIPS_DB_USERNAME) \
    APP_DB_PASSWORD=$(INTERNSHIPS_DB_PASSWORD) \
    APP_DB_NAME=$(INTERNSHIPS_DB_NAME) \
    APP_DB_HOST=$(INTERNSHIPS_DB_HOST) \
    APP_DB_PORT=$(INTERNSHIPS_DB_PORT) \
    APP_ACCOUNT_INIT_EMAIL=$(INTERNSHIPS_API_ACCOUNT_INIT_EMAIL) \
    APP_SMTP_USERNAME=$(INTERNSHIPS_SMTP_USERNAME) \
    APP_MESSAGE_BROKER_USERNAME=$(INTERNSHIPS_MESSAGE_BROKER_USERNAME) \
    APP_MESSAGE_BROKER_PASSWORD=$(INTERNSHIPS_MESSAGE_BROKER_PASSWORD) \
    APP_MESSAGE_BROKER_HOST=$(INTERNSHIPS_MESSAGE_BROKER_HOST) \
    APP_MESSAGE_BROKER_PORT=$(INTERNSHIPS_MESSAGE_BROKER_PORT) \
    APP_FRONTEND_URL=$(INTERNSHIPS_FRONTEND_URL) \
    APP_API_JWT_SECRET=$(INTERNSHIPS_API_JWT_SECRET) \
    APP_API_JWT_ALGORITHM=$(INTERNSHIPS_API_JWT_ALGORITHM) \
    APP_API_JWT_ACCESS_TOKEN_EXPIRE_MINUTES=$(INTERNSHIPS_API_JWT_ACCESS_TOKEN_EXPIRE_MINUTES) \
    APP_POINTS_URL=$(INTERNSHIPS_POINTS_URL) \
    APP_API_URL=$(INTERNSHIPS_API_URL) \
    APP_API_CONSUMER_KEY=$(INTERNSHIPS_API_CONSUMER_KEY) \
    APP_TIMESHEET_URL=$(INTERNSHIPS_TIMESHEET_URL) \
    docker-compose -p $(INTERNSHIPS_API_PROJECT) -f docker-compose.yaml up -d

.PHONY: build
build:
	docker build -t $(INTERNSHIPS_API_IMAGE_NAME):$(INTERNSHIPS_API_IMAGE_VERSION) -f Dockerfile .
