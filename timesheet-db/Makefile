INTERNSHIPS_TIMESHEET_DB_PROJECT ?= internships-timesheet-db-project
INTERNSHIPS_TIMESHEET_DB_IMAGE_VERSION ?= 0.0.1
INTERNSHIPS_TIMESHEET_DB_IMAGE_NAME ?= internships-timesheet-db
INTERNSHIPS_TIMESHEET_DB_NAME ?= internshipstimesheetbackenddb
INTERNSHIPS_TIMESHEET_DB_USERNAME ?= internshipstimesheetbackenddb
INTERNSHIPS_TIMESHEET_DB_PASSWORD ?= internshipstimesheetbackenddbpwd
INTERNSHIPS_TIMESHEET_DB_PORT ?= 5432
INTERNSHIPS_TIMESHEET_DB_HOST ?= timesheet-db
INTERNSHIPS_TIMESHEET_DB_DATA_PATH ?= /src/docker/internships-timesheet-db-data/
INTERNSHIPS_TIMESHEET_DB_PROXY_NETWORK ?= "internships-network"

.PHONY: build
build:
	docker build -t $(INTERNSHIPS_TIMESHEET_DB_IMAGE_NAME):$(INTERNSHIPS_TIMESHEET_DB_IMAGE_VERSION) -f Dockerfile .

.PHONY: run
run:
	- docker network create $(INTERNSHIPS_TIMESHEET_DB_PROXY_NETWORK)
	- mkdir -p $(INTERNSHIPS_TIMESHEET_DB_DATA_PATH)
	APP_PROXY_NETWORK=$(INTERNSHIPS_TIMESHEET_DB_PROXY_NETWORK) \
	APP_TIMESHEET_DB_IMAGE_VERSION=$(INTERNSHIPS_TIMESHEET_DB_IMAGE_VERSION) \
	APP_TIMESHEET_DB_IMAGE_NAME=$(INTERNSHIPS_TIMESHEET_DB_IMAGE_NAME) \
    APP_TIMESHEET_DB_USERNAME=$(INTERNSHIPS_TIMESHEET_DB_USERNAME) \
    APP_TIMESHEET_DB_PASSWORD=$(INTERNSHIPS_TIMESHEET_DB_PASSWORD) \
    APP_TIMESHEET_DB_NAME=$(INTERNSHIPS_TIMESHEET_DB_NAME) \
    APP_TIMESHEET_DB_PORT=$(INTERNSHIPS_TIMESHEET_DB_PORT) \
    APP_TIMESHEET_DB_HOST=$(INTERNSHIPS_TIMESHEET_DB_HOST) \
    APP_TIMESHEET_DB_DATA_PATH=$(INTERNSHIPS_TIMESHEET_DB_DATA_PATH) \
	docker-compose -p $(INTERNSHIPS_TIMESHEET_DB_PROJECT) -f docker-compose.yaml up -d
