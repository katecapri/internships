INTERNSHIPS_EMAIL_API_PROJECT ?= internships-email-api-project
INTERNSHIPS_EMAIL_API_IMAGE_VERSION ?= 0.0.1
INTERNSHIPS_EMAIL_API_IMAGE_NAME ?= internships-email-api
INTERNSHIPS_EMAIL_DB_NAME ?= internshipsemailbackenddb
INTERNSHIPS_EMAIL_DB_USERNAME ?= internshipsemailbackenddb
INTERNSHIPS_EMAIL_DB_PASSWORD ?= internshipsemailbackenddbpwd
INTERNSHIPS_EMAIL_DB_PORT ?= 5432
INTERNSHIPS_EMAIL_DB_HOST ?= email-db
INTERNSHIPS_EMAIL_API_PROXY_NETWORK ?= "internships-network"
INTERNSHIPS_EMAIL_CONSUMER_KEY ?= 383638b1-tged-4caz-8347-643am54a1234
INTERNSHIPS_SMTP_HOST ?= smtp.gmail.com
INTERNSHIPS_SMTP_PORT ?= 587
INTERNSHIPS_SMTP_USERNAME ?= "your_smtp_username"
INTERNSHIPS_SMTP_PASSWORD ?= "your_smtp_password"

.PHONY: run
run:
	- docker network create $(INTERNSHIPS_EMAIL_API_PROXY_NETWORK)
	sleep 1
	APP_EMAIL_API_IMAGE_VERSION=$(INTERNSHIPS_EMAIL_API_IMAGE_VERSION) \
    APP_EMAIL_API_IMAGE_NAME=$(INTERNSHIPS_EMAIL_API_IMAGE_NAME) \
    APP_PROXY_NETWORK=$(INTERNSHIPS_EMAIL_API_PROXY_NETWORK) \
    APP_EMAIL_DB_USERNAME=$(INTERNSHIPS_EMAIL_DB_USERNAME) \
    APP_EMAIL_DB_PASSWORD=$(INTERNSHIPS_EMAIL_DB_PASSWORD) \
    APP_EMAIL_DB_NAME=$(INTERNSHIPS_EMAIL_DB_NAME) \
    APP_EMAIL_DB_HOST=$(INTERNSHIPS_EMAIL_DB_HOST) \
    APP_EMAIL_DB_PORT=$(INTERNSHIPS_EMAIL_DB_PORT) \
    APP_EMAIL_CONSUMER_KEY=$(INTERNSHIPS_EMAIL_CONSUMER_KEY) \
    APP_SMTP_HOST=$(INTERNSHIPS_SMTP_HOST) \
    APP_SMTP_PORT=$(INTERNSHIPS_SMTP_PORT) \
    APP_SMTP_USERNAME=$(INTERNSHIPS_SMTP_USERNAME) \
    APP_SMTP_PASSWORD=$(INTERNSHIPS_SMTP_PASSWORD) \
    docker-compose -p $(INTERNSHIPS_EMAIL_API_PROJECT) -f docker-compose.yaml up -d

.PHONY: build
build:
	docker build -t $(INTERNSHIPS_EMAIL_API_IMAGE_NAME):$(INTERNSHIPS_EMAIL_API_IMAGE_VERSION) -f Dockerfile .
